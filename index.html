<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding: 20px; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); }
    .container { max-width: 1200px; margin: 0 auto; }
    .header { text-align: center; margin-bottom: 30px; }
    .header h1 { color: #2c3e50; margin-bottom: 10px; }
    .card { background: white; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); padding: 20px; margin-bottom: 20px; }
    .card-title { color: #3498db; border-bottom: 2px solid #3498db; padding-bottom: 10px; margin-top: 0; }
    .input-group { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 15px; align-items: center; }
    input, select, button { padding: 10px; border-radius: 5px; border: 1px solid #ddd; font-size: 16px; }
    input[type="date"], input[type="month"] { flex: 1; }
    input[type="text"], input[type="number"] { flex: 2; }
    button { background: #3498db; color: white; border: none; cursor: pointer; transition: all 0.3s; font-weight: bold; }
    button:hover { background: #2980b9; transform: translateY(-2px); }
    button.danger { background: #e74c3c; }
    button.danger:hover { background: #c0392b; }
    button.success { background: #2ecc71; }
    button.success:hover { background: #27ae60; }
    table { width: 100%; margin-top: 20px; border-collapse: collapse; background: #fff; }
    th { background: #3498db; color: white; }
    th, td { padding: 12px; border: 1px solid #ddd; text-align: left; }
    tr:nth-child(even) { background: #f9f9f9; }
    tr:hover { background: #f1f9ff; }
    .summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; }
    .summary-card { background: white; border-radius: 8px; padding: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); text-align: center; }
    .income { border-left: 5px solid #2ecc71; }
    .expense { border-left: 5px solid #e74c3c; }
    .balance { border-left: 5px solid #3498db; }
    .summary-card h3 { margin-top: 0; color: #7f8c8d; }
    .summary-card p { font-size: 24px; font-weight: bold; margin: 10px 0; }
    .graphs { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
    .graph-container { background: white; border-radius: 10px; padding: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
    @media (max-width: 768px) {
      .graphs { grid-template-columns: 1fr; }
    }
    .no-data { text-align: center; padding: 40px; color: #7f8c8d; }
    .no-data i { font-size: 48px; margin-bottom: 15px; }
    .date-display { font-size: 18px; font-weight: bold; margin-bottom: 15px; color: #2c3e50; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üìä ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</h1>
      <p>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
    </div>

    <div class="card">
      <h2 class="card-title">‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h2>
      <div class="input-group">
        <input type="month" id="monthSelect" />
        <button onclick="exportCSV()">üì§ ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å CSV</button>
        <button onclick="exportJSON()" class="success">üíæ ‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (JSON)</button>
        <input type="file" id="jsonFile" accept=".json" />
        <button onclick="importJSON()">üì• ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
      </div>
    </div>

    <div class="card">
      <h2 class="card-title">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà</h2>
      <div class="input-group">
        <input type="date" id="date" />
        <input type="text" id="desc" placeholder="‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£" />
        <input type="number" id="amount" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô" min="0" step="0.01" />
        <select id="type">
          <option value="income">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</option>
          <option value="expense">‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</option>
        </select>
        <button onclick="addEntry()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
        <button onclick="clearAll()" class="danger">üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
      </div>
    </div>

    <div class="card">
      <h2 class="card-title">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</h2>
      <div class="date-display" id="monthDisplay"></div>
      <table>
        <thead>
          <tr>
            <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
            <th>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</th>
            <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
            <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô (‡∏ö‡∏≤‡∏ó)</th>
            <th>‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
          </tr>
        </thead>
        <tbody id="recordList">
          <!-- Records will be populated here -->
        </tbody>
      </table>
    </div>

    <div class="card">
      <h2 class="card-title">‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î</h2>
      <div class="summary-grid">
        <div class="summary-card income">
          <h3>‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
          <p id="totalIncome">0.00</p>
        </div>
        <div class="summary-card expense">
          <h3>‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
          <p id="totalExpense">0.00</p>
        </div>
        <div class="summary-card balance">
          <h3>‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠</h3>
          <p id="totalBalance">0.00</p>
        </div>
      </div>
    </div>

    <div class="card">
      <h2 class="card-title">‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h2>
      <div class="graphs">
        <div class="graph-container">
          <h3>‡∏Å‡∏£‡∏≤‡∏ü‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö-‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</h3>
          <canvas id="barChart" height="250"></canvas>
        </div>
        <div class="graph-container">
          <h3>‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö-‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</h3>
          <canvas id="pieChart" height="250"></canvas>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
    let records = JSON.parse(localStorage.getItem("records") || []);
    let barChart = null;
    let pieChart = null;

    // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
    document.addEventListener("DOMContentLoaded", function() {
      const now = new Date();
      document.getElementById("date").valueAsDate = now;
      document.getElementById("monthSelect").value = now.toISOString().slice(0, 7);
      
      document.getElementById("monthSelect").addEventListener("change", render);
      render();
    });

    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà
    function addEntry() {
      const date = document.getElementById("date").value;
      const desc = document.getElementById("desc").value.trim();
      const amount = parseFloat(document.getElementById("amount").value);
      const type = document.getElementById("type").value;
      
      if (!date || !desc || !amount || isNaN(amount) {
        alert("‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô");
        return;
      }
      
      records.push({ date, desc, amount, type });
      localStorage.setItem("records", JSON.stringify(records));
      render();
      
      // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°
      document.getElementById("desc").value = "";
      document.getElementById("amount").value = "";
      document.getElementById("desc").focus();
    }

    // ‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
    function removeEntry(index) {
      if (confirm("‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ?")) {
        records.splice(index, 1);
        localStorage.setItem("records", JSON.stringify(records));
        render();
      }
    }

    // ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
    function clearAll() {
      if (confirm("‚ö†Ô∏è ‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?\n‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÑ‡∏î‡πâ")) {
        records = [];
        localStorage.setItem("records", "[]");
        render();
      }
    }

    // ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å CSV
    function exportCSV() {
      const month = document.getElementById("monthSelect").value;
      const monthName = getMonthName(month);
      
      const rows = [["‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà", "‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢", "‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó", "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"]];
      records.filter(r => r.date.startsWith(month)).forEach(r => {
        rows.push([r.date, r.desc, r.type === "income" ? "‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö" : "‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢", r.amount]);
      });
      
      const csv = rows.map(e => e.join(",")).join("\n");
      const blob = new Blob(["\uFEFF" + csv], { type: "text/csv;charset=utf-8;" });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = `‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô-${monthName}-${month.slice(0,4)}.csv`;
      link.click();
    }

    // ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å JSON
    function exportJSON() {
      const blob = new Blob([JSON.stringify(records, null, 2)], { type: "application/json" });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô-‡∏™‡∏≥‡∏£‡∏≠‡∏á.json";
      link.click();
    }

    // ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ JSON
    function importJSON() {
      const file = document.getElementById("jsonFile").files[0];
      if (!file) {
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏Å‡πà‡∏≠‡∏ô");
        return;
      }
      
      const reader = new FileReader();
      reader.onload = function(e) {
        try {
          const data = JSON.parse(e.target.result);
          if (Array.isArray(data)) {
            records = data;
            localStorage.setItem("records", JSON.stringify(records));
            render();
            alert("‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!");
          } else {
            alert("‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
          }
        } catch (error) {
          alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏Ç‡∏ì‡∏∞‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏ü‡∏•‡πå: " + error.message);
        }
      };
      reader.readAsText(file);
    }

    // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
    function render() {
      const month = document.getElementById("monthSelect").value;
      const monthName = getMonthName(month);
      document.getElementById("monthDisplay").innerHTML = `üìÖ ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô: ${monthName} ${month.slice(0,4)}`;
      
      const tbody = document.getElementById("recordList");
      tbody.innerHTML = "";
      
      let totalIncome = 0;
      let totalExpense = 0;
      
      // ‡∏Å‡∏£‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà
      const filteredRecords = records
        .filter(r => r.date.startsWith(month))
        .sort((a, b) => new Date(b.date) - new Date(a.date));
      
      if (filteredRecords.length === 0) {
        tbody.innerHTML = `
          <tr>
            <td colspan="5" style="text-align: center; padding: 30px;">
              <div class="no-data">
                <div>üì≠</div>
                <h3>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</h3>
                <p>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô</p>
              </div>
            </td>
          </tr>
        `;
      } else {
        filteredRecords.forEach((r, i) => {
          const tr = document.createElement("tr");
          tr.innerHTML = `
            <td>${formatDate(r.date)}</td>
            <td>${r.desc}</td>
            <td><span class="${r.type === "income" ? "income" : "expense"}">${r.type === "income" ? "‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö" : "‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢"}</span></td>
            <td style="color: ${r.type === "income" ? "#27ae60" : "#e74c3c"}">${r.amount.toLocaleString("th-TH", {minimumFractionDigits: 2})}</td>
            <td><button onclick="removeEntry(${records.findIndex(rec => rec.date === r.date && rec.desc === r.desc)})" class="danger">‡∏•‡∏ö</button></td>
          `;
          tbody.appendChild(tr);
          
          if (r.type === "income") totalIncome += r.amount;
          else totalExpense += r.amount;
        });
      }
      
      // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î
      document.getElementById("totalIncome").textContent = totalIncome.toLocaleString("th-TH", {minimumFractionDigits: 2});
      document.getElementById("totalExpense").textContent = totalExpense.toLocaleString("th-TH", {minimumFractionDigits: 2});
      document.getElementById("totalBalance").textContent = (totalIncome - totalExpense).toLocaleString("th-TH", {minimumFractionDigits: 2});
      
      // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏£‡∏≤‡∏ü
      renderCharts(month, totalIncome, totalExpense);
    }

    // ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏£‡∏≤‡∏ü
    function renderCharts(month, income, expense) {
      // ‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡∏Å‡∏£‡∏≤‡∏ü‡πÄ‡∏Å‡πà‡∏≤ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
      if (barChart) barChart.destroy();
      if (pieChart) pieChart.destroy();
      
      const barCtx = document.getElementById("barChart").getContext("2d");
      const pieCtx = document.getElementById("pieChart").getContext("2d");
      const monthName = getMonthName(month);
      
      // ‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏ó‡πà‡∏á
      barChart = new Chart(barCtx, {
        type: "bar",
        data: {
          labels: ["‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö", "‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢", "‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠"],
          datasets: [{
            label: `‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ${monthName}`,
            data: [income, expense, income - expense],
            backgroundColor: ["#27ae60", "#e74c3c", "#3498db"],
            borderColor: ["#2ecc71", "#c0392b", "#2980b9"],
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: { display: false },
            tooltip: {
              callbacks: {
                label: function(context) {
                  return context.dataset.label + ": " + context.parsed.y.toLocaleString("th-TH") + " ‡∏ö‡∏≤‡∏ó";
                }
              }
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              ticks: {
                callback: function(value) {
                  return value.toLocaleString("th-TH") + " ‡∏ö‡∏≤‡∏ó";
                }
              }
            }
          }
        }
      });
      
      // ‡∏Å‡∏£‡∏≤‡∏ü‡∏ß‡∏á‡∏Å‡∏•‡∏°
      pieChart = new Chart(pieCtx, {
        type: "pie",
        data: {
          labels: ["‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö", "‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢"],
          datasets: [{
            data: [income, expense],
            backgroundColor: ["#27ae60", "#e74c3c"],
            borderColor: ["#2ecc71", "#c0392b"],
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          plugins: {
            tooltip: {
              callbacks: {
                label: function(context) {
                  const label = context.label || '';
                  const value = context.parsed || 0;
                  const total = context.dataset.data.reduce((a, b) => a + b, 0);
                  const percentage = total > 0 ? Math.round((value / total) * 100) : 0;
                  return `${label}: ${value.toLocaleString("th-TH")} ‡∏ö‡∏≤‡∏ó (${percentage}%)`;
                }
              }
            }
          }
        }
      });
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠
    function formatDate(dateString) {
      const date = new Date(dateString);
      return date.toLocaleDateString("th-TH", {
        year: "numeric",
        month: "short",
        day: "numeric"
      });
    }

    function getMonthName(monthString) {
      const months = [
        "‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°", "‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå", "‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏°", "‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô", 
        "‡∏û‡∏§‡∏©‡∏†‡∏≤‡∏Ñ‡∏°", "‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô", "‡∏Å‡∏£‡∏Å‡∏é‡∏≤‡∏Ñ‡∏°", "‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏°", 
        "‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô", "‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏°", "‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô", "‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏°"
      ];
      return months[parseInt(monthString.slice(5, 7)) - 1];
    }

    // ‡∏£‡∏±‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
    render();
  </script>
</body>
</html>
